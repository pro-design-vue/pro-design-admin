import{A as x}from"./auth-title-m5bsTMso.js";import{d as y,a3 as g,bO as $,an as F,a0 as z,a6 as E,b5 as I,b6 as k,b7 as a,a4 as e,M as t,$ as n,bD as s,bu as m,bg as L}from"./index-Bg643ARb.js";import{P as R}from"./regexp-BZOQi8XT.js";import{a1 as b,u as A,a3 as D}from"./basic-B4_U5Jym.js";import{F as G,a as h}from"./index-C-ZB4OH6.js";import{I as _,b as P}from"./index-BnprOzYY.js";import"./plugin-vueexport-helper-DlAUqK2U.js";import"./Col-CZ83tv3K.js";import"./isEqual-DLw9SpKa.js";import"./hasIn-B4h2Teaf.js";import"./collapseMotion-CHI8RJn1.js";import"./FormItemContext-BDfaEFBq.js";import"./index-BZ4FpSfE.js";const U=60,q=y({name:"CodeLoginForm",__name:"form",props:{loading:{type:Boolean,default:!1}},emits:["submit"],setup(C,{emit:d}){const c=d,o=g(0),i=g(!1),p=g(),S=$("formRef"),l=F({phoneNumber:"",code:""}),T=z(()=>i.value||o.value>0);function w(u){c("submit",u)}async function B(u){try{u?.preventDefault(),await S.value?.validate("phoneNumber"),i.value=!0,await N(),o.value=U,v()}catch{}finally{i.value=!1}}async function N(){}function v(){o.value>0&&(p.value=setTimeout(()=>{o.value--,v()},1e3))}return E(()=>{o.value=0,clearTimeout(p.value)}),(u,r)=>(k(),I(e(G),{ref:"formRef",model:l,name:"authentication_login",autocomplete:"off",onFinish:w},{default:a(()=>[t(e(h),{name:"phoneNumber",rules:[{required:!0,message:e(n)("authentication.mobileTip"),trigger:"change"},{pattern:e(R),message:e(n)("authentication.mobileErrortip"),trigger:"change"}]},{default:a(()=>[t(e(_),{value:l.phoneNumber,"onUpdate:value":r[0]||(r[0]=f=>l.phoneNumber=f),size:"large",placeholder:e(n)("authentication.mobile")},null,8,["value","placeholder"])]),_:1},8,["rules"]),t(e(h),{name:"code",rules:[{required:!0,message:e(n)("authentication.codeTip"),trigger:"change"}]},{default:a(()=>[t(e(P),{compact:""},{default:a(()=>[t(e(_),{value:l.code,"onUpdate:value":r[1]||(r[1]=f=>l.code=f),size:"large",type:"number",style:{width:"calc(100% - 180px)"},placeholder:e(n)("authentication.code")},null,8,["value","placeholder"]),t(e(b),{size:"large",style:{width:"180px"},loading:T.value,onClick:B},{default:a(()=>[s(m(o.value>0?e(n)("authentication.sendText",[o.value]):e(n)("authentication.sendCode")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules"]),t(e(h),{"no-style":""},{default:a(()=>[t(e(b),{type:"primary",loading:u.loading,block:"",size:"large","html-type":"submit"},{default:a(()=>[s(m(e(n)("common.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]))}}),O={class:"code-login"},ae=y({__name:"index",setup(C){const d=D(),c=A();function o(){d.go(-1)}return(i,p)=>(k(),L("div",O,[t(e(x),null,{desc:a(()=>[s(m(i.$t("authentication.codeSubtitle")),1)]),default:a(()=>[s(m(`${i.$t("authentication.welcomeBack")} ðŸ“²`)+" ",1)]),_:1}),t(e(q),{loading:e(c).loginLoading,onSubmit:e(c).authCodeLogin},null,8,["loading","onSubmit"]),t(e(b),{block:"",size:"large",style:{"margin-top":"15px"},onClick:o},{default:a(()=>[s(m(i.$t("common.back")),1)]),_:1})]))}});export{ae as default};
