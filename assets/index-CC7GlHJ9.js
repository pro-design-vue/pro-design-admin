import{A as N}from"./auth-title-DbSCEFp8.js";import{d as y,a3 as g,bU as $,an as F,a0 as z,a6 as E,b6 as I,b7 as k,b8 as a,a4 as e,M as t,$ as n,bG as s,bx as m,bi as L}from"./index-C8kcDjv6.js";import{P as R}from"./regexp-BZOQi8XT.js";import{X as b,u as G,Y as U}from"./basic-D1XeoARd.js";import{F as A,a as h}from"./index-CZyKYI81.js";import{I as _,b as P}from"./index-BWtIiOcd.js";import"./plugin-vueexport-helper-DlAUqK2U.js";import"./Col-Dgkf7qad.js";import"./isEqual-CYv9LXTt.js";import"./hasIn-CGgVAvce.js";import"./collapseMotion-nvb4zUKG.js";import"./FormItemContext-CHIiuD72.js";import"./index-DKZzKQgG.js";const q=60,D=y({name:"CodeLoginForm",__name:"form",props:{loading:{type:Boolean,default:!1}},emits:["submit"],setup(C,{emit:d}){const c=d,o=g(0),i=g(!1),p=g(),S=$("formRef"),l=F({phoneNumber:"",code:""}),T=z(()=>i.value||o.value>0);function w(u){c("submit",u)}async function x(u){try{u?.preventDefault(),await S.value?.validate("phoneNumber"),i.value=!0,await B(),o.value=q,v()}catch{}finally{i.value=!1}}async function B(){}function v(){o.value>0&&(p.value=setTimeout(()=>{o.value--,v()},1e3))}return E(()=>{o.value=0,clearTimeout(p.value)}),(u,r)=>(k(),I(e(A),{ref:"formRef",model:l,name:"authentication_login",autocomplete:"off",onFinish:w},{default:a(()=>[t(e(h),{name:"phoneNumber",rules:[{required:!0,message:e(n)("authentication.mobileTip"),trigger:"change"},{pattern:e(R),message:e(n)("authentication.mobileErrortip"),trigger:"change"}]},{default:a(()=>[t(e(_),{value:l.phoneNumber,"onUpdate:value":r[0]||(r[0]=f=>l.phoneNumber=f),size:"large",placeholder:e(n)("authentication.mobile")},null,8,["value","placeholder"])]),_:1},8,["rules"]),t(e(h),{name:"code",rules:[{required:!0,message:e(n)("authentication.codeTip"),trigger:"change"}]},{default:a(()=>[t(e(P),{compact:""},{default:a(()=>[t(e(_),{value:l.code,"onUpdate:value":r[1]||(r[1]=f=>l.code=f),size:"large",type:"number",style:{width:"calc(100% - 180px)"},placeholder:e(n)("authentication.code")},null,8,["value","placeholder"]),t(e(b),{size:"large",style:{width:"180px"},loading:T.value,onClick:x},{default:a(()=>[s(m(o.value>0?e(n)("authentication.sendText",[o.value]):e(n)("authentication.sendCode")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules"]),t(e(h),{"no-style":""},{default:a(()=>[t(e(b),{type:"primary",loading:u.loading,block:"",size:"large","html-type":"submit"},{default:a(()=>[s(m(e(n)("common.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]))}}),V={class:"code-login"},ae=y({__name:"index",setup(C){const d=U(),c=G();function o(){d.go(-1)}return(i,p)=>(k(),L("div",V,[t(e(N),null,{desc:a(()=>[s(m(i.$t("authentication.codeSubtitle")),1)]),default:a(()=>[s(m(`${i.$t("authentication.welcomeBack")} ðŸ“²`)+" ",1)]),_:1}),t(e(D),{loading:e(c).loginLoading,onSubmit:e(c).authCodeLogin},null,8,["loading","onSubmit"]),t(e(b),{block:"",size:"large",style:{"margin-top":"15px"},onClick:o},{default:a(()=>[s(m(i.$t("common.back")),1)]),_:1})]))}});export{ae as default};
